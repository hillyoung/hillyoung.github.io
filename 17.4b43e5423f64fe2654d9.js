(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{I95e:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),u=e("ZZ/e"),o=(e("vlXg"),function(){function l(l,n,e,t,u,o){var i=this;this.router=l,this.route=n,this.nav=e,this.dataservice=t,this.utilService=u,this.userService=o,this.cacheKey="",this.commonUsers=[],this.originUsers=[],this.virtualScrollDataSources=[],this.wordIndexs={},this.singleSelect=!1,this.callbackid="",document.title="\u9009\u62e9\u4eba\u5458",this.cacheKey="commonuser"+this.userService.getUserInfo().userId,this.orgInfo={orgNo:this.userService.getUserInfo().orgNo,orgNam:this.userService.getUserInfo().orgNam},this.commonUsers=this.utilService.get(this.cacheKey)||[],this.indexTitles=["#"],this.selectedUsers=[],this.groups={},this.route.queryParams.subscribe(function(l){console.debug(i.router.getCurrentNavigation().extras.state);var n=i.router.getCurrentNavigation().extras.state;n&&(i.callbackid=n.callbackid,i.singleSelect=n.singleSelect||!1)});for(var s=0;s<26;s++)this.indexTitles.push(String.fromCharCode(s+65))}return l.prototype.ngOnInit=function(){this.loadData(null)},l.prototype.usersrc=function(l){var n={type:3,orgno:this.userService.getUserInfo().orgNo,userid:this.userService.getUserInfo().userId,headid:l.id};return this.utilService.urlForUserId(n)},l.prototype.imageIonError=function(l){console.debug(l),l.target.src="./assets/icon/avator.png"},l.prototype.myHeaderFn=function(l,n,e){return null!=this.wordIndexs[n]&&null!=this.wordIndexs[n]?this.wordIndexs[n]:null},l.prototype.inputTextDidChange=function(l){l.target.value.length>0?this.filterKeyword(l.target.value):this.resetGroups(this.originUsers)},l.prototype.clickCompany=function(){var l=this;this.dataservice.setData("company",function(n){console.log(n),l.selectedUsers=[],l.orgInfo.orgNo=n.orgId,l.orgInfo.orgNam=n.orgNam,l.loadData(null)}),this.router.navigateByUrl("/company",{state:{params:{userid:this.userService.getUserInfo().userId},callbackid:"company"}})},l.prototype.clickConfirmButton=function(){if(0==this.selectedUsers.length)this.utilService.showToast("\u672a\u9009\u62e9\u4eba\u5458");else{var l=this.dataservice.getData(this.callbackid);null!=l&&(l(this.selectedUsers),this.nav.pop())}},l.prototype.selectUser=function(l){1==this.singleSelect?(this.selectedUsers.push(l),this.clickConfirmButton()):(l.selected?this.selectedUsers.push(l):this.removeUser(l),console.log(l))},l.prototype.clickWord=function(l){for(var n=0,e=0;e<this.groups.keys.length;e++){var t=this.groups.keys[e];if(t>=l)break;n+=30,this.groups[t].forEach(function(l,e,t){n+=53})}this.content.scrollToPoint(0,n)},l.prototype.clickRemoveUserButton=function(l){this.removeUser(l)},l.prototype.removeUser=function(l){l.selected=!1;for(var n=-1,e=0;e<this.selectedUsers.length;++e)if(this.selectedUsers[e]==l){n=e;break}-1!=n&&this.selectedUsers.splice(n,1)},l.prototype.resetGroups=function(l){this.groups=this.utilService.groupsFromUserModel(l);var n=0;console.log(this.groups),this.virtualScrollDataSources=[],this.wordIndexs=[];for(var e=0;e<this.groups.keys.length;e++){var t=this.groups.keys[e];this.wordIndexs[n]=t;var u=this.groups[t];n+=u.length,this.virtualScrollDataSources=this.virtualScrollDataSources.concat(u)}console.log(this.virtualScrollDataSources)},l.prototype.filterKeyword=function(l){var n=[];if(/^[0-9]*$/.test(l))this.originUsers.forEach(function(e,t,u){-1!=e.phone.indexOf(l)&&n.push(e)});else if(/^[\u4e00-\u9fa5]+$/.test(l))this.originUsers.forEach(function(e,t,u){-1!=e.name.indexOf(l)&&n.push(e)});else if(/^[A-Za-z]+$/.test(l)){var e=l.toUpperCase(),t=this;this.originUsers.forEach(function(l,u,o){0==t.utilService.pinyinForChineseWord(l.name).indexOf(e)&&n.push(l)})}this.resetGroups(n)},l.prototype.handleData=function(l){var n=this,e=l.users.sort(function(l,n){return l.name.localeCompare(n.name)});e.forEach(function(l){l.src=n.usersrc(l)}),this.originUsers=e,this.resetGroups(e)},l.prototype.loadData=function(l){var n=this;this.keyword="",null==l?this.utilService.showLoad().then(function(l){n.userService.orgnaizinfo(n.orgInfo.orgNo,3).then(function(e){l.dismiss(),null!=e.users&&n.handleData(e)})}):this.userService.orgnaizinfo(this.orgInfo.orgNo,3).then(function(e){l.target.complete(),null!=e.users&&n.handleData(e)})},l}()),i=function(){return function(){}}(),s=e("pMnS"),r=e("lyNL"),c=e("oBZk"),a=e("gIcY"),h=e("Ip0R"),b=e("ZYCi"),d=e("AwSQ"),g=e("BaxT"),f=e("Ouoq"),p=t.mb({encapsulation:0,styles:[r.a],data:{}});function m(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,8,"ion-col",[["class","col-content-user"],["size","2"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.removeUser(l.context.$implicit)&&t),t},c.O,c.i)),t.nb(1,49152,null,0,u.s,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.ob(2,0,null,0,3,"ion-checkbox",[["class","checkbox-user-selected"],["disabled",""]],null,[[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var u=!0;return"ionBlur"===n&&(u=!1!==t.yb(l,5)._handleBlurEvent()&&u),"ionChange"===n&&(u=!1!==t.yb(l,5)._handleIonChange(e.target.checked)&&u),u},c.N,c.h)),t.zb(5120,null,a.c,function(l){return[l]},[u.c]),t.nb(4,49152,null,0,u.q,[t.h,t.k],{checked:[0,"checked"],disabled:[1,"disabled"]},null),t.nb(5,16384,null,0,u.c,[t.k],null,null),(l()(),t.ob(6,0,null,0,0,"img",[["class","img-user-selected"],["onerror","this.src='./assets/icon/avator.png'"]],[[8,"src",4]],null,null,null,null)),(l()(),t.ob(7,0,null,0,1,"span",[["class","span-user-selected"]],null,null,null,null,null)),(l()(),t.Cb(8,null,["",""]))],function(l,n){l(n,1,0,"2"),l(n,4,0,!0,"")},function(l,n){l(n,6,0,n.context.$implicit.src),l(n,8,0,n.context.$implicit.name)})}function v(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,3,"ion-row",[["class","row-user-selected"],["justify-content-start",""],["nowrap",""]],null,null,null,c.fb,c.z)),t.nb(1,49152,null,0,u.hb,[t.h,t.k],null,null),(l()(),t.fb(16777216,null,0,1,null,m)),t.nb(3,278528,null,0,h.h,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.selectedUsers)},null)}function k(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,2,"ion-item-divider",[],null,null,null,c.Y,c.t)),t.nb(1,49152,null,0,u.H,[t.h,t.k],null,null),(l()(),t.Cb(2,0,[" "," "]))],null,function(l,n){l(n,2,0,n.context.$implicit)})}function y(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,18,"ion-item",[["class","item-content-user"]],null,null,null,c.ab,c.s)),t.nb(1,49152,null,0,u.G,[t.h,t.k],null,null),(l()(),t.ob(2,0,null,0,6,"ion-checkbox",[["slot","start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(l,n,e){var u=!0,o=l.component;return"ionBlur"===n&&(u=!1!==t.yb(l,3)._handleBlurEvent()&&u),"ionChange"===n&&(u=!1!==t.yb(l,3)._handleIonChange(e.target.checked)&&u),"ngModelChange"===n&&(u=!1!==(l.context.$implicit.selected=e)&&u),"ionChange"===n&&(u=!1!==o.selectUser(l.context.$implicit)&&u),u},c.N,c.h)),t.nb(3,16384,null,0,u.c,[t.k],null,null),t.zb(1024,null,a.c,function(l){return[l]},[u.c]),t.nb(5,671744,null,0,a.h,[[8,null],[8,null],[8,null],[6,a.c]],{model:[0,"model"]},{update:"ngModelChange"}),t.zb(2048,null,a.d,null,[a.h]),t.nb(7,16384,null,0,a.e,[[4,a.d]],null,null),t.nb(8,49152,null,0,u.q,[t.h,t.k],{checked:[0,"checked"]},null),(l()(),t.ob(9,0,null,0,9,"ion-label",[["class","label-content-user"]],null,null,null,c.bb,c.v)),t.nb(10,49152,null,0,u.M,[t.h,t.k],null,null),(l()(),t.ob(11,0,null,0,3,"ion-thumbnail",[["class","ion-user"],["slot","start"]],null,null,null,c.ib,c.C)),t.nb(12,49152,null,0,u.xb,[t.h,t.k],null,null),(l()(),t.ob(13,0,null,0,1,"ion-img",[["style","border-radius: 22px;"]],null,[[null,"ionError"]],function(l,n,e){var t=!0;return"ionError"===n&&(t=!1!==l.component.imageIonError(e)&&t),t},c.U,c.o)),t.nb(14,49152,null,0,u.C,[t.h,t.k],{src:[0,"src"]},null),(l()(),t.ob(15,0,null,0,1,"p",[["class","p-name-user"]],null,null,null,null,null)),(l()(),t.Cb(16,null,["",""])),(l()(),t.ob(17,0,null,0,1,"p",[["class","p-positio-user"]],null,null,null,null,null)),(l()(),t.Cb(18,null,["",""]))],function(l,n){l(n,5,0,n.context.$implicit.selected),l(n,8,0,1==n.context.$implicit.selected),l(n,14,0,n.context.$implicit.src)},function(l,n){l(n,2,0,t.yb(n,7).ngClassUntouched,t.yb(n,7).ngClassTouched,t.yb(n,7).ngClassPristine,t.yb(n,7).ngClassDirty,t.yb(n,7).ngClassValid,t.yb(n,7).ngClassInvalid,t.yb(n,7).ngClassPending),l(n,16,0,n.context.$implicit.name),l(n,18,0,n.context.$implicit.position)})}function C(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,2,"a",[["class","item-index-a"]],null,null,null,null,null)),(l()(),t.ob(1,0,null,null,1,"span",[["class","item-index-title"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.clickWord(l.context.$implicit)&&t),t},null,null)),(l()(),t.Cb(2,null,[" "," "]))],null,function(l,n){l(n,2,0,n.context.$implicit)})}function x(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,3,"ion-list",[["class","list-index"],["no-lines",""]],null,null,null,c.cb,c.w)),t.nb(1,49152,null,0,u.N,[t.h,t.k],null,null),(l()(),t.fb(16777216,null,0,1,null,C)),t.nb(3,278528,null,0,h.h,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.indexTitles)},null)}function U(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,6,"ion-footer",[["class","footer"]],null,null,null,c.Q,c.k)),t.nb(1,49152,null,0,u.y,[t.h,t.k],null,null),(l()(),t.ob(2,0,null,0,4,"div",[["class","div-content-footer"]],null,null,null,null,null)),(l()(),t.ob(3,0,null,null,1,"span",[["class","span-title-total"]],null,null,null,null,null)),(l()(),t.Cb(4,null,["",""])),(l()(),t.ob(5,0,null,null,1,"button",[["class","button-confirm"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.clickConfirmButton()&&t),t},null,null)),(l()(),t.Cb(-1,null,["\u786e\u5b9a"]))],null,function(l,n){var e=n.component;l(n,4,0,e.selectedUsers.length>0?"\u5df2\u9009\u62e9"+e.selectedUsers.length+"\u4eba":"")})}function I(l){return t.Db(0,[t.Ab(402653184,1,{content:0}),(l()(),t.ob(1,0,null,null,19,"ion-header",[],null,null,null,c.S,c.m)),t.nb(2,49152,null,0,u.A,[t.h,t.k],null,null),(l()(),t.ob(3,0,null,0,12,"ion-grid",[["class","searchContent"]],null,null,null,c.R,c.l)),t.nb(4,49152,null,0,u.z,[t.h,t.k],null,null),(l()(),t.ob(5,0,null,0,8,"ion-row",[["align-items-center",""],["class","border-bottom-full"]],null,null,null,c.fb,c.z)),t.nb(6,49152,null,0,u.hb,[t.h,t.k],null,null),(l()(),t.ob(7,0,null,0,6,"ion-searchbar",[["cancelButtonText","\u53d6\u6d88"],["color","light"],["placeholder","\u641c\u7d22\u4eba\u5458-\u6c49\u5b57/\u62fc\u97f3/\u624b\u673a\u53f7\u7801"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(l,n,e){var u=!0,o=l.component;return"ionBlur"===n&&(u=!1!==t.yb(l,8)._handleBlurEvent()&&u),"ionChange"===n&&(u=!1!==t.yb(l,8)._handleInputEvent(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(o.keyword=e)&&u),"ionChange"===n&&(u=!1!==o.inputTextDidChange(e)&&u),u},c.gb,c.A)),t.nb(8,16384,null,0,u.Jb,[t.k],null,null),t.zb(1024,null,a.c,function(l){return[l]},[u.Jb]),t.nb(10,671744,null,0,a.h,[[8,null],[8,null],[8,null],[6,a.c]],{model:[0,"model"]},{update:"ngModelChange"}),t.zb(2048,null,a.d,null,[a.h]),t.nb(12,16384,null,0,a.e,[[4,a.d]],null,null),t.nb(13,49152,null,0,u.ib,[t.h,t.k],{color:[0,"color"],cancelButtonText:[1,"cancelButtonText"],placeholder:[2,"placeholder"]},null),(l()(),t.fb(16777216,null,0,1,null,v)),t.nb(15,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.ob(16,0,null,0,4,"ion-item",[["class","item-content-org"],["detail",""],["lines","none"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.clickCompany()&&t),t},c.ab,c.s)),t.nb(17,49152,null,0,u.G,[t.h,t.k],{detail:[0,"detail"],lines:[1,"lines"]},null),(l()(),t.ob(18,0,null,0,0,"img",[["class","img-org"],["src","assets/icon/addUser_company.png"]],null,null,null,null,null)),(l()(),t.ob(19,0,null,0,1,"span",[["class","span-org"]],null,null,null,null,null)),(l()(),t.Cb(20,null,["",""])),(l()(),t.ob(21,0,null,null,14,"ion-content",[],[[8,"className",0]],null,null,c.P,c.j)),t.nb(22,49152,[[1,4],["content",4]],0,u.t,[t.h,t.k],null,null),(l()(),t.ob(23,0,null,0,3,"ion-refresher",[["style","z-index: 9997;"]],null,[[null,"ionRefresh"]],function(l,n,e){var t=!0;return"ionRefresh"===n&&(t=!1!==l.component.loadData(e)&&t),t},c.eb,c.x)),t.nb(24,49152,null,0,u.bb,[t.h,t.k],null,null),(l()(),t.ob(25,0,null,0,1,"ion-refresher-content",[["pullingText","\u4e0b\u62c9\u5237\u65b0"],["refreshingText","\u5237\u65b0\u4e2d"]],null,null,null,c.db,c.y)),t.nb(26,49152,null,0,u.cb,[t.h,t.k],{pullingText:[0,"pullingText"],refreshingText:[1,"refreshingText"]},null),(l()(),t.ob(27,0,null,0,8,"ion-virtual-scroll",[],null,null,null,c.lb,c.F)),t.nb(28,835584,null,3,u.Bb,[t.z,t.s,t.k],{headerFn:[0,"headerFn"],items:[1,"items"]},null),t.Ab(335544320,2,{itmTmp:0}),t.Ab(335544320,3,{hdrTmp:0}),t.Ab(335544320,4,{ftrTmp:0}),(l()(),t.fb(0,null,0,1,null,k)),t.nb(33,16384,[[3,4]],0,u.Lb,[t.K],null,null),(l()(),t.fb(16777216,null,0,1,null,y)),t.nb(35,16384,[[2,4]],0,u.Mb,[t.K,t.N],null,null),(l()(),t.fb(16777216,null,null,1,null,x)),t.nb(37,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,U)),t.nb(39,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,10,0,e.keyword),l(n,13,0,"light","\u53d6\u6d88","\u641c\u7d22\u4eba\u5458-\u6c49\u5b57/\u62fc\u97f3/\u624b\u673a\u53f7\u7801"),l(n,15,0,e.selectedUsers.length>0),l(n,17,0,"","none"),l(n,26,0,"\u4e0b\u62c9\u5237\u65b0","\u5237\u65b0\u4e2d"),l(n,28,0,e.myHeaderFn.bind(e),e.virtualScrollDataSources),l(n,37,0,!0),l(n,39,0,!e.singleSelect)},function(l,n){var e=n.component;l(n,7,0,t.yb(n,12).ngClassUntouched,t.yb(n,12).ngClassTouched,t.yb(n,12).ngClassPristine,t.yb(n,12).ngClassDirty,t.yb(n,12).ngClassValid,t.yb(n,12).ngClassInvalid,t.yb(n,12).ngClassPending),l(n,20,0,e.orgInfo.orgNam),l(n,21,0,t.qb(1,"",e.singleSelect?"":"ion-content-user",""))})}function w(l){return t.Db(0,[(l()(),t.ob(0,0,null,null,1,"add-user",[],null,null,null,I,p)),t.nb(1,114688,null,0,o,[b.m,b.a,u.Gb,d.a,g.a,f.a],null,null)],function(l,n){l(n,1,0)},null)}var S=t.kb("add-user",o,w,{},{},[]);e.d(n,"AddUserModuleNgFactory",function(){return D});var D=t.lb(i,[],function(l){return t.vb([t.wb(512,t.j,t.ab,[[8,[s.a,S]],[3,t.j],t.x]),t.wb(4608,h.k,h.j,[t.u,[2,h.q]]),t.wb(4608,a.k,a.k,[]),t.wb(4608,u.b,u.b,[t.z,t.g]),t.wb(4608,u.Fb,u.Fb,[u.b,t.j,t.q,h.c]),t.wb(4608,u.Ib,u.Ib,[u.b,t.j,t.q,h.c]),t.wb(1073742336,h.b,h.b,[]),t.wb(1073742336,a.i,a.i,[]),t.wb(1073742336,a.b,a.b,[]),t.wb(1073742336,u.Cb,u.Cb,[]),t.wb(1073742336,b.n,b.n,[[2,b.t],[2,b.m]]),t.wb(1073742336,i,i,[]),t.wb(1024,b.k,function(){return[[{path:"",component:o}]]},[])])})}}]);